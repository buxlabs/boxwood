<div class="slider">
  <img src="/assets/images/foo.jpg"/>
  <img src="/assets/images/bar.jpg"/>
  <img src="/assets/images/baz.jpg"/>
</div>
<div class="slider-controls"></div>
<script>
let timeout
const slides = document.querySelectorAll('.slider img')
const buttons = []
let currentIndex = 0

function slide (nextIndex) {
  timer()
  if (currentIndex === nextIndex) return null
  buttons[currentIndex].classList.remove('active')
  buttons[nextIndex].classList.add('active')

  slides[currentIndex].style.display = 'none'
  slides[nextIndex].style.display = 'block'
  currentIndex = nextIndex
}

function timer() {
  clearTimeout(timeout)
  timeout = setTimeout(() => {
    const firstIndex = 0
    const lastIndex = slides.length - 1
    const nextIndex = currentIndex + 1
    currentIndex < lastIndex ? slide(nextIndex) : slide(firstIndex)
  }, 4000)
}

function createButtons () {
  const container = document.querySelector('.slider-controls')
  for (let index = 0; index < slides.length; index++) {
    const button = document.createElement('button')
    button.type = 'button'
    currentIndex === index ? button.classList.add('active') : ''
    button.addEventListener('click', slide.bind(this, index))
    container.append(button)
    buttons.push(button)
  }
}

createButtons()
timer()
</script>